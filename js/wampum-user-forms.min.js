!function(a,e,s){"use strict";function n(a){t(a);var e=a.siblings('form[data-form="login"]');a.fadeOut(300,function(){e.fadeIn(600)}),e.find(".wampum_username").val(a.find(".wampum_user_email").val()),e.find(".wampum-back").remove(),e.find(".wampum-submit").after('<a class="wampum-back" href="#">&nbsp;&nbsp;Go back</a>'),e.on("click",".wampum-back",function(s){s.preventDefault(),e.fadeOut(300,function(){a.fadeIn(600)}),e.find(".wampum_user_password").val("")})}function r(a,e,s){a.find(".wampum-notice").removeClass("success error").addClass(e).html(s).fadeIn("fast")}function t(a){a.find(".wampum-notice").slideUp("fast",function(){e(this).removeClass("success error")})}function i(){return'<span class="wampum-loading"><span class="wampum-loading-circle wampum-loading-circle1">&#8226;</span><span class="wampum-loading-circle wampum-loading-circle2">&#8226;</span><span class="wampum-loading-circle wampum-loading-circle3">&#8226;</span></span>'}var m=e(".wampum-form"),o=e(".password-strength-meter");e.each(m,function(){console.log("Bahhh"),e(this).find("input[type=hidden]").val(),e(this).find('input[name="ac_tags"]').val();var a=e(this).find('input[name="password"]'),s=e(this).find('input[name="password_confirm"]');(a.length&&s.length)>0&&m.on("keyup",s,function(e){a.val()==s.val()?a.add(s).css({"border-color":"#25f500"}):a.add(s).css({"border-color":""})})}),o.length>0&&(m.on("focus",'input[name="password"]',function(a){e(this).closest("form").find(".password-strength").slideDown("fast")}),m.on("keyup",'input[name="password"]',function(a){console.log("Keyup Password");var s=e(this).closest("form"),n={0:"Weak",1:"Weak",2:"Okay",3:"Good",4:"Great"},r=s.find(".password-strength-meter"),t=s.find(".password-strength-text"),i=e(this).val(),m=zxcvbn(i);r.attr("data-strength",m.score),""!==i?t.html(n[m.score]):t.html("")})),m.on("submit",'form[data-form="login"]',function(a){console.log("Login form submitted"),a.preventDefault();var s=e(this),n=s.find("button.submit"),m=n.html();s.addClass("processing"),n.prop("disabled",!0),n.html(i()),t(s);var o={user_login:s.find('input[name="username"]').val(),user_password:s.find('input[name="password"]').val(),remember:s.find('input[name="rememberme"]').val(),say_what:s.find('input[name="say_what"]').val()};e.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/login/",data:o,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){r(s,"success","Success!");var e=s.find('input[name="redirect"]').val();""!=e&&("membership_form"==e?window.location.reload():window.location.replace(e))}else r(s,"error",a.message)},fail:function(a){r(s,"error",a.failure)}}).done(function(a){s.removeClass("processing"),n.html(m).prop("disabled",!1)})}),m.on("submit",'form[data-form="password"]',function(a){console.log("Password form submitted"),a.preventDefault();var s=e(this),n=s.find("button.submit"),m=n.html();s.addClass("processing"),n.prop("disabled",!0),n.html(i()),t(s);var o={password:s.find('input[name="password"]').val(),password_confirm:s.find('input[name="password_confirm"]').val(),say_what:s.find('input[name="say_what"]').val()};e.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/password/",data:o,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){s.find('input[type="password"]').val(""),r(s,"success","Success!");var e=s.find('input[name="redirect"]').val();window.location.replace(e)}else s.find(".password-strength-meter").attr("data-strength",""),s.find(".password-strength-text").html(""),r(s,"error",a.message)},fail:function(a){r(s,"error",wampumFormVars.failure)}}).done(function(a){s.removeClass("processing"),n.html(m).prop("disabled",!1)})}),m.on("submit",'form[data-form="register"]',function(a){console.log("Register form submitted"),a.preventDefault();var s=e(this),n=s.find("button.submit"),m=n.html();n.prop("disabled",!0),n.html(i()),t(s);var o={user_email:s.find('input[name="email"]').val(),username:s.find('input[name="username"]').val(),first_name:s.find('input[name="first_name"]').val(),last_name:s.find('input[name="last_name"]').val(),password:s.find('input[name="password"]').val(),log_in:s.find('input[name="log_in"]').val(),ac_list_ids:s.find('input[name="ac_list_ids"]').val(),ac_tags:s.find('input[name="ac_tags"]').val(),say_what:s.find('input[name="say_what"]').val()};e.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/register/",data:o,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){r(s,"success","Success!");var e=s.find('input[name="redirect"]').val();window.location.replace(e)}else r(s,"error",a.message)},fail:function(a){r(s,"error",a.failure)}}).done(function(a){s.removeClass("processing"),n.html(m).prop("disabled",!1)})}),m.on("submit",'form[data-form="user-available"]',function(a){console.log("User available form submitted"),a.preventDefault();var s=e(this),m=s.find(".wampum-submit");s.addClass("processing");var o=m.html();m.attr("disabled",!0),m.html(i()),t(s);var u={say_what:s.find('[name="wampum_say_what"]').val(),user_email:s.find('[name="wampum_user_email"]').val(),username:s.find('[name="wampum_username"]').val(),current_url:wampumFormVars.current_url},l=s.find(".wampum_ss_baseuri").val(),d=s.find(".wampum_ss_endpoint").val(),p=s.serialize();l&&d&&s.after('<script type="text/javascript">var __ss_noform = __ss_noform || [];</script>'),e.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/user-available/",data:u,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){l&&d&&e.ajax({url:l+d+"/jsonp/?"+p,contentType:"application/json",dataType:"jsonp",success:function(a){console.log("Data successfully sent to SharpSpring.")}});var t=s.siblings('form[data-form="join-membership"]');t.find(".wampum_first_name").val(s.find(".wampum_first_name").val()).attr("readonly",!0),t.find(".wampum_last_name").val(s.find(".wampum_last_name").val()).attr("readonly",!0),t.find(".wampum_user_email").val(s.find(".wampum_user_email").val()).attr("readonly",!0),t.find(".wampum_username").val(s.find(".wampum_username").val()).attr("readonly",!0),t.find(".wampum-first-name").hide(),t.find(".wampum-last-name").hide(),t.find(".wampum-email").hide(),t.find(".wampum-username").hide(),r(t,"success","Almost there! This is the last step."),s.hide(),t.show(),t.find(".wampum_user_password").focus()}else r(s,"error",a.message),s.on("click",".login-link",function(a){a.preventDefault(),setTimeout(function(){n(s)},300)})},fail:function(a){r(s,"error",wampumFormVars.failure)}}).done(function(a){s.removeClass("processing"),m.html(o).attr("disabled",!1)})}),m.on("submit",'form[data-form="join-membership"]',function(a){console.log("Membership form submitted"),a.preventDefault();var s=e(this),m=s.find(".wampum-submit");s.addClass("processing");var o=m.html();m.attr("disabled",!0),m.html(i()),t(s);var u={plan_id:s.find(".wampum_plan_id").val(),first_name:s.find(".wampum_first_name").val(),last_name:s.find(".wampum_last_name").val(),user_email:s.find(".wampum_user_email").val(),username:s.find(".wampum_username").val(),password:s.find(".wampum_user_password").val(),notifications:s.find(".wampum_notifications").val(),say_what:s.find(".wampum_say_what").val(),current_url:wampumFormVars.current_url},l=s.find(".wampum_ss_baseuri").val(),d=s.find(".wampum_ss_endpoint").val(),p=e("input[type!=password]",s).serialize();l&&d&&s.after('<script type="text/javascript">var __ss_noform = __ss_noform || [];</script>'),e.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/membership-add/",data:u,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){l&&d&&e.ajax({url:l+d+"/jsonp/?"+p,contentType:"application/json",dataType:"jsonp",success:function(a){console.log("Data successfully sent to SharpSpring.")}}),r(s,"success","Success!");var t=s.find(".wampum_redirect").val();""!==t?setTimeout(function(){window.location.replace(t)},300):setTimeout(function(){s.fadeOut("fast")},300)}else r(s,"error",a.message),s.on("click",".login-link",function(a){a.preventDefault(),setTimeout(function(){n($userAvailableForm)},300)})},fail:function(a){r(s,"error",wampumFormVars.failure)}}).done(function(a){s.removeClass("processing"),m.html(o).attr("disabled",!1)})})}(document,jQuery);