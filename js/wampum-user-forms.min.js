!function(a,s,e){"use strict";function n(a){m(a);var s=a.siblings('form[data-form="login"]');a.fadeOut(300,function(){s.fadeIn(600)}),s.find(".wampum_username").val(a.find(".wampum_user_email").val()),s.find(".wampum-back").remove(),s.find(".wampum-submit").after('<a class="wampum-back" href="#">&nbsp;&nbsp;Go back</a>'),s.on("click",".wampum-back",function(e){e.preventDefault(),s.fadeOut(300,function(){a.fadeIn(600)}),s.find(".wampum_user_password").val("")})}function r(a,s,e){a.find(".wampum-notice").removeClass("success error").addClass(s).html(e).fadeIn("fast")}function m(a){a.find(".wampum-notice").slideUp("fast",function(){s(this).removeClass("success error")})}function t(){return'<span class="wampum-loading"><span class="wampum-loading-circle wampum-loading-circle1">&#8226;</span><span class="wampum-loading-circle wampum-loading-circle2">&#8226;</span><span class="wampum-loading-circle wampum-loading-circle3">&#8226;</span></span>'}var i=s(".wampum-form");i.on("focus",".wampum_password",function(a){s(this).closest("form").find(".password-strength").slideDown("fast")}),i.on("keyup",".wampum_password",function(a){var e=s(this).closest("form"),n={0:"Weak",1:"Weak",2:"Okay",3:"Good",4:"Great"},r=e.find(".password-strength-meter"),m=e.find(".password-strength-text"),t=s(this).val(),i=zxcvbn(t);r.attr("data-strength",i.score),""!==t?m.html(n[i.score]):m.html("")}),i.on("submit",'form[data-form="login"]',function(a){console.log("Login form submitted"),a.preventDefault();var e=s(this),n=e.find("button.submit"),i=n.html();e.addClass("processing"),n.prop("disabled",!0),n.html(t()),m(e);var o={user_login:e.find('input[name="username"]').val(),user_password:e.find('input[name="password"]').val(),remember:e.find('input[name="rememberme"]').val(),say_what:e.find('input[name="say_what"]').val()};console.log(o),s.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/login/",data:o,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(console.log(a),1==a.success){r(e,"success","Success!");var s=e.find(".wampum_redirect").val();""!==s&&("membership_form"==s?window.location.reload():window.location.replace(s))}else r(e,"error",a.message)},fail:function(a){r(e,"error",a.failure)}}).done(function(a){e.removeClass("processing"),n.html(i).attr("disabled",!1)})}),i.on("submit",'form[data-form="register"]',function(a){console.log("Register form submitted"),a.preventDefault();var e=s(this);e.addClass("processing");var n=e.find(".wampum-submit"),i=n.html();n.attr("disabled",!0),n.html(t()),m(e);var o={user_email:e.find(".wampum_user_email").val(),username:e.find(".wampum_username").val(),first_name:e.find(".wampum_first_name").val(),last_name:e.find(".wampum_last_name").val(),password:e.find(".wampum_user_password").val(),log_in:e.find(".wampum_log_in").val(),list_id:e.find(".wampum_ac_list_ids").val(),say_what:e.find(".wampum_say_what").val()};s.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/register/",data:o,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){r(e,"success","Success!");var s=e.find(".wampum_redirect").val();""!==s&&window.location.replace(s)}else r(e,"error",a.message)},fail:function(a){r(e,"error",a.failure)}}).done(function(a){e.removeClass("processing"),n.html(i).attr("disabled",!1)})}),i.on("submit",'form[data-form="password"]',function(a){console.log("Password form submitted"),a.preventDefault();var e=s(this);e.addClass("processing");var n=e.find(".wampum-submit"),i=n.html();n.attr("disabled",!0),n.html(t()),m(e);var o={password:e.find(".wampum_user_password").val(),password_confirm:e.find(".wampum_user_password_confirm").val(),say_what:e.find(".wampum_say_what").val()};s.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/password/",data:o,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){e.find("input:password").val(""),r(e,"success","Success!");var s=e.find(".wampum_redirect").val();window.location.replace(s)}else r(e,"error",a.message)},fail:function(a){r(e,"error",wampumFormVars.failure)}}).done(function(a){e.removeClass("processing"),e.find(".password-strength-meter").attr("data-strength",""),e.find(".password-strength-text").html(""),n.html(i).attr("disabled",!1)})}),i.on("submit",'form[data-form="user-available"]',function(a){console.log("User available form submitted"),a.preventDefault();var e=s(this),i=e.find(".wampum-submit");e.addClass("processing");var o=i.html();i.attr("disabled",!0),i.html(t()),m(e);var u={say_what:e.find('[name="wampum_say_what"]').val(),user_email:e.find('[name="wampum_user_email"]').val(),username:e.find('[name="wampum_username"]').val(),current_url:wampumFormVars.current_url},l=e.find(".wampum_ss_baseuri").val(),d=e.find(".wampum_ss_endpoint").val(),c=e.serialize();l&&d&&e.after('<script type="text/javascript">var __ss_noform = __ss_noform || [];</script>'),s.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/user-available/",data:u,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){l&&d&&s.ajax({url:l+d+"/jsonp/?"+c,contentType:"application/json",dataType:"jsonp",success:function(a){console.log("Data successfully sent to SharpSpring.")}});var m=e.siblings('form[data-form="join-membership"]');m.find(".wampum_first_name").val(e.find(".wampum_first_name").val()).attr("readonly",!0),m.find(".wampum_last_name").val(e.find(".wampum_last_name").val()).attr("readonly",!0),m.find(".wampum_user_email").val(e.find(".wampum_user_email").val()).attr("readonly",!0),m.find(".wampum_username").val(e.find(".wampum_username").val()).attr("readonly",!0),m.find(".wampum-first-name").hide(),m.find(".wampum-last-name").hide(),m.find(".wampum-email").hide(),m.find(".wampum-username").hide(),r(m,"success","Almost there! This is the last step."),e.hide(),m.show(),m.find(".wampum_user_password").focus()}else r(e,"error",a.message),e.on("click",".login-link",function(a){a.preventDefault(),setTimeout(function(){n(e)},300)})},fail:function(a){r(e,"error",wampumFormVars.failure)}}).done(function(a){e.removeClass("processing"),i.html(o).attr("disabled",!1)})}),i.on("submit",'form[data-form="join-membership"]',function(a){console.log("Membership form submitted"),a.preventDefault();var e=s(this),i=e.find(".wampum-submit");e.addClass("processing");var o=i.html();i.attr("disabled",!0),i.html(t()),m(e);var u={plan_id:e.find(".wampum_plan_id").val(),first_name:e.find(".wampum_first_name").val(),last_name:e.find(".wampum_last_name").val(),user_email:e.find(".wampum_user_email").val(),username:e.find(".wampum_username").val(),password:e.find(".wampum_user_password").val(),notifications:e.find(".wampum_notifications").val(),say_what:e.find(".wampum_say_what").val(),current_url:wampumFormVars.current_url},l=e.find(".wampum_ss_baseuri").val(),d=e.find(".wampum_ss_endpoint").val(),c=s("input[type!=password]",e).serialize();l&&d&&e.after('<script type="text/javascript">var __ss_noform = __ss_noform || [];</script>'),s.ajax({method:"POST",url:wampumFormVars.root+"wampum/v1/membership-add/",data:u,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wampumFormVars.nonce)},success:function(a){if(1==a.success){l&&d&&s.ajax({url:l+d+"/jsonp/?"+c,contentType:"application/json",dataType:"jsonp",success:function(a){console.log("Data successfully sent to SharpSpring.")}}),r(e,"success","Success!");var m=e.find(".wampum_redirect").val();""!==m?setTimeout(function(){window.location.replace(m)},300):setTimeout(function(){e.fadeOut("fast")},300)}else r(e,"error",a.message),e.on("click",".login-link",function(a){a.preventDefault(),setTimeout(function(){n($userAvailableForm)},300)})},fail:function(a){r(e,"error",wampumFormVars.failure)}}).done(function(a){e.removeClass("processing"),i.html(o).attr("disabled",!1)})})}(document,jQuery);